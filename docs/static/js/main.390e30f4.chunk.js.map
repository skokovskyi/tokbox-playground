{"version":3,"sources":["logo.svg","App.tsx","index.tsx"],"names":["module","exports","otCore","AccCore","require","otCoreOptions","credentials","apiKey","config","sessionId","token","streamContainers","pubSub","type","data","stream","publisher","camera","screen","subscriber","controlsContainer","packages","communication","callProperties","textChat","name","Math","random","waitingMessage","container","screenSharing","extensionID","annotation","externalWindow","dev","screenProperties","insertMode","width","height","showControls","style","buttonDisplayMode","videoSource","fitMode","absoluteParent","App","props","state","connected","active","publishers","subscribers","meta","localAudioEnabled","localVideoEnabled","startCall","bind","endCall","toggleLocalAudio","toggleLocalVideo","connect","then","setState","forEach","event","on","catch","error","console","log","this","start","sharingScreen","viewingSharedScreen","activeCameraSubscribers","activeCameraSubscribersGt2","activeCameraSubscribersOdd","screenshareActive","controlClass","classNames","hidden","localAudioClass","muted","localVideoClass","localCallClass","cameraPublisherClass","small","left","screenPublisherClass","cameraSubscriberClass","screenSubscriberClass","containerClasses","className","src","logo","alt","onClick","id","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.390e30f4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.cd18bdec.svg\";","//  @ts-nocheck\n\nimport React, { Component } from 'react';\nimport Spinner from 'react-spinner';\nimport classNames from 'classnames';\n\n\nimport logo from './logo.svg';\nimport config from './config.json';\nimport './App.css';\n\nconst AccCore = require('opentok-accelerator-core/dist/core');\n\n//  @ts-ignore\nlet otCore;\nconst otCoreOptions = {\n    credentials: {\n        apiKey: config.apiKey,\n        sessionId: config.sessionId,\n        token: config.token,\n    },\n    // A container can either be a query selector or an HTML Element\n    streamContainers(pubSub, type, data, stream) {\n        return {\n            publisher: {\n                camera: '#cameraPublisherContainer',\n                screen: '#screenPublisherContainer',\n            },\n            subscriber: {\n                camera: '#cameraSubscriberContainer',\n                screen: '#screenSubscriberContainer',\n            },\n        }[pubSub][type];\n    },\n    controlsContainer: '#controls',\n    packages: ['textChat', 'screenSharing', 'annotation'],\n    //packages: [],\n    communication: {\n        callProperties: null, // Using default\n    },\n    textChat: {\n        name: ['David', 'Paul', 'Emma', 'George', 'Amanda'][Math.random() * 5 | 0], // eslint-disable-line no-bitwise\n        waitingMessage: 'Messages will be delivered when other users arrive',\n        container: '#chat',\n    },\n    screenSharing: {\n        extensionID: 'plocfffmbcclpdifaikiikgplfnepkpo',\n        annotation: true,\n        externalWindow: false,\n        dev: true,\n        screenProperties: {\n            insertMode: 'append',\n            width: '100%',\n            height: '100%',\n            showControls: false,\n            style: {\n                buttonDisplayMode: 'off',\n            },\n            videoSource: 'window',\n            fitMode: 'contain' // Using default\n        },\n    },\n    annotation: {\n        absoluteParent: {\n            publisher: '.App-video-container',\n            subscriber: '.App-video-container'\n        }\n    },\n};\n\n/**\n * Build classes for container elements based on state\n * @param {Object} state\n */\n//  @ts-ignore\nconst containerClasses = (state) => {\n    const { active, meta, localAudioEnabled, localVideoEnabled } = state;\n    const sharingScreen = meta ? !!meta.publisher.screen : false;\n    const viewingSharedScreen = meta ? meta.subscriber.screen : false;\n    const activeCameraSubscribers = meta ? meta.subscriber.camera : 0;\n    const activeCameraSubscribersGt2 = activeCameraSubscribers > 2;\n    const activeCameraSubscribersOdd = activeCameraSubscribers % 2;\n    const screenshareActive = viewingSharedScreen || sharingScreen;\n    return {\n        controlClass: classNames('App-control-container', { hidden: !active }),\n        localAudioClass: classNames('ots-video-control circle audio', { hidden: !active, muted: !localAudioEnabled }),\n        localVideoClass: classNames('ots-video-control circle video', { hidden: !active, muted: !localVideoEnabled }),\n        localCallClass: classNames('ots-video-control circle end-call', { hidden: !active }),\n        cameraPublisherClass: classNames('video-container', { hidden: !active, small: !!activeCameraSubscribers || screenshareActive, left: screenshareActive }),\n        screenPublisherClass: classNames('video-container', { hidden: !active || !sharingScreen }),\n        cameraSubscriberClass: classNames('video-container', { hidden: !active || !activeCameraSubscribers },\n            { 'active-gt2': activeCameraSubscribersGt2 && !screenshareActive },\n            { 'active-odd': activeCameraSubscribersOdd && !screenshareActive },\n            { small: screenshareActive }\n        ),\n        screenSubscriberClass: classNames('video-container', { hidden: !viewingSharedScreen || !active }),\n    };\n};\n\nconst connectingMask = () =>\n    <div className=\"App-mask\">\n        <Spinner />\n        <div className=\"message with-spinner\">Connecting</div>\n    </div>;\n\n//  @ts-ignore\nconst startCallMask = start =>\n    <div className=\"App-mask\">\n        <button className=\"message button clickable\" onClick={start}>Click to Start Call </button>\n    </div>;\n\nclass App extends Component {\n    //  @ts-ignore\n    constructor(props) {\n        super(props);\n        this.state = {\n            connected: false,\n            active: false,\n            publishers: null,\n            subscribers: null,\n            meta: null,\n            localAudioEnabled: true,\n            localVideoEnabled: true,\n        };\n        this.startCall = this.startCall.bind(this);\n        this.endCall = this.endCall.bind(this);\n        this.toggleLocalAudio = this.toggleLocalAudio.bind(this);\n        this.toggleLocalVideo = this.toggleLocalVideo.bind(this);\n    }\n\n    componentDidMount() {\n        otCore = new AccCore(otCoreOptions);\n        otCore.connect().then(() => this.setState({ connected: true }));\n        const events = [\n            'subscribeToCamera',\n            'unsubscribeFromCamera',\n            'subscribeToScreen',\n            'unsubscribeFromScreen',\n            'startScreenShare',\n            'endScreenShare',\n        ];\n\n        events.forEach(event => otCore.on(event, ({ publishers, subscribers, meta }) => {\n            this.setState({ publishers, subscribers, meta });\n        }));\n    }\n\n    startCall() {\n        otCore.startCall()\n            .then(({ publishers, subscribers, meta }) => {\n                this.setState({ publishers, subscribers, meta, active: true });\n            }).catch(error => console.log(error));\n    }\n\n    endCall() {\n        otCore.endCall();\n        this.setState({ active: false });\n    }\n\n    toggleLocalAudio() {\n        otCore.toggleLocalAudio(!this.state.localAudioEnabled);\n        this.setState({ localAudioEnabled: !this.state.localAudioEnabled });\n    }\n\n    toggleLocalVideo() {\n        otCore.toggleLocalVideo(!this.state.localVideoEnabled);\n        this.setState({ localVideoEnabled: !this.state.localVideoEnabled });\n    }\n\n    render() {\n        const { connected, active } = this.state;\n        const {\n            localAudioClass,\n            localVideoClass,\n            localCallClass,\n            controlClass,\n            cameraPublisherClass,\n            screenPublisherClass,\n            cameraSubscriberClass,\n            screenSubscriberClass,\n        } = containerClasses(this.state);\n\n        return (\n            <div className=\"App\">\n                <div className=\"App-header\">\n                    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                    <h1>OpenTok Accelerator Core</h1>\n                </div>\n                <div className=\"App-main\">\n                    <div className=\"App-video-container\">\n                        { !connected && connectingMask() }\n                        { connected && !active && startCallMask(this.startCall)}\n                        <div id=\"cameraPublisherContainer\" className={cameraPublisherClass} />\n                        <div id=\"screenPublisherContainer\" className={screenPublisherClass} />\n                        <div id=\"cameraSubscriberContainer\" className={cameraSubscriberClass} />\n                        <div id=\"screenSubscriberContainer\" className={screenSubscriberClass} />\n                    </div>\n                    <div id=\"controls\" className={controlClass}>\n                        <div className={localAudioClass} onClick={this.toggleLocalAudio} />\n                        <div className={localVideoClass} onClick={this.toggleLocalVideo} />\n                        <div className={localCallClass} onClick={this.endCall} />\n                    </div>\n                    <div id=\"chat\" className=\"App-chat-container\" />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}