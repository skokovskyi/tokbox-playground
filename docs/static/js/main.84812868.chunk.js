(this["webpackJsonptokbox-playground"]=this["webpackJsonptokbox-playground"]||[]).push([[0],{27:function(e,a,t){e.exports=t.p+"static/media/logo.cd18bdec.svg"},30:function(e,a,t){e.exports=t(67)},35:function(e,a,t){},36:function(e,a,t){},67:function(e,a,t){"use strict";t.r(a);var l,n=t(0),s=t.n(n),c=t(23),i=t.n(c),r=(t(35),t(24)),o=t(25),d=t(3),u=t(28),b=t(29),m=t(26),h=t.n(m),C=t(2),v=t.n(C),p=t(27),g=t.n(p),E=(t(36),t(37)),S=function(e){Object(b.a)(t,e);var a=Object(u.a)(t);function t(e){var l;return Object(r.a)(this,t),(l=a.call(this,e)).state={connected:!1,active:!1,publishers:null,subscribers:null,meta:null,localAudioEnabled:!0,localVideoEnabled:!0},l.startCall=l.startCall.bind(Object(d.a)(l)),l.endCall=l.endCall.bind(Object(d.a)(l)),l.toggleLocalAudio=l.toggleLocalAudio.bind(Object(d.a)(l)),l.toggleLocalVideo=l.toggleLocalVideo.bind(Object(d.a)(l)),l}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=new URLSearchParams(window.location.search),t=a.get("apiKey"),n=a.get("sessionId"),s=a.get("token");(l=new E({credentials:{apiKey:t,sessionId:n,token:s},streamContainers:function(e,a,t,l){return{publisher:{camera:"#cameraPublisherContainer",screen:"#screenPublisherContainer"},subscriber:{camera:"#cameraSubscriberContainer",screen:"#screenSubscriberContainer"}}[e][a]},controlsContainer:"#controls"})).connect().then((function(){return e.setState({connected:!0})}));["subscribeToCamera","unsubscribeFromCamera","subscribeToScreen","unsubscribeFromScreen","startScreenShare","endScreenShare"].forEach((function(a){return l.on(a,(function(a){var t=a.publishers,l=a.subscribers,n=a.meta;e.setState({publishers:t,subscribers:l,meta:n})}))}))}},{key:"startCall",value:function(){var e=this;l.startCall().then((function(a){var t=a.publishers,l=a.subscribers,n=a.meta;e.setState({publishers:t,subscribers:l,meta:n,active:!0})})).catch((function(e){return console.log(e)}))}},{key:"endCall",value:function(){l.endCall(),this.setState({active:!1})}},{key:"toggleLocalAudio",value:function(){l.toggleLocalAudio(!this.state.localAudioEnabled),this.setState({localAudioEnabled:!this.state.localAudioEnabled})}},{key:"toggleLocalVideo",value:function(){l.toggleLocalVideo(!this.state.localVideoEnabled),this.setState({localVideoEnabled:!this.state.localVideoEnabled})}},{key:"render",value:function(){var e,a=this.state,t=a.connected,l=a.active,n=function(e){var a=e.active,t=e.meta,l=e.localAudioEnabled,n=e.localVideoEnabled,s=!!t&&!!t.publisher.screen,c=!!t&&t.subscriber.screen,i=t?t.subscriber.camera:0,r=i>2,o=i%2,d=c||s;return{controlClass:v()("App-control-container",{hidden:!a}),localAudioClass:v()("ots-video-control circle audio",{hidden:!a,muted:!l}),localVideoClass:v()("ots-video-control circle video",{hidden:!a,muted:!n}),localCallClass:v()("ots-video-control circle end-call",{hidden:!a}),cameraPublisherClass:v()("video-container",{hidden:!a,small:!!i||d,left:d}),screenPublisherClass:v()("video-container",{hidden:!a||!s}),cameraSubscriberClass:v()("video-container",{hidden:!a||!i},{"active-gt2":r&&!d},{"active-odd":o&&!d},{small:d}),screenSubscriberClass:v()("video-container",{hidden:!c||!a})}}(this.state),c=n.localAudioClass,i=n.localVideoClass,r=n.localCallClass,o=n.controlClass,d=n.cameraPublisherClass,u=n.screenPublisherClass,b=n.cameraSubscriberClass,m=n.screenSubscriberClass;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"App-header"},s.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"}),s.a.createElement("h1",null,"OpenTok Accelerator Core")),s.a.createElement("div",{className:"App-main"},s.a.createElement("div",{className:"App-video-container"},!t&&s.a.createElement("div",{className:"App-mask"},s.a.createElement(h.a,null),s.a.createElement("div",{className:"message with-spinner"},"Connecting")),t&&!l&&(e=this.startCall,s.a.createElement("div",{className:"App-mask"},s.a.createElement("button",{className:"message button clickable",onClick:e},"Click to Start Call "))),s.a.createElement("div",{id:"cameraPublisherContainer",className:d}),s.a.createElement("div",{id:"screenPublisherContainer",className:u}),s.a.createElement("div",{id:"cameraSubscriberContainer",className:b}),s.a.createElement("div",{id:"screenSubscriberContainer",className:m})),s.a.createElement("div",{style:{position:"absolute",bottom:0,width:"100%"}},s.a.createElement("div",{id:"controls",className:o},s.a.createElement("div",{className:c,onClick:this.toggleLocalAudio}),s.a.createElement("div",{className:i,onClick:this.toggleLocalVideo}),s.a.createElement("div",{className:r,onClick:this.endCall})))))}}]),t}(n.Component);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(S,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.84812868.chunk.js.map